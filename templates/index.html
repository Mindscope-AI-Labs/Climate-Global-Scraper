<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OpenCurrent</title>
  <link rel="icon" type="image/png" href="/static/images/title-logo.png" />
  <link rel="shortcut icon" type="image/png" href="/static/images/title-logo.png" />
  <link href="/static/css/styles.css" rel="stylesheet" />
  <style>
    :root {
      --border-color: rgba(255, 255, 255, 0.08);
      --panel: #141820;
      --accent: #2ea3ff;
      --input: #1b2128;
      --muted: #9aa3b3;
    }
    .chat-container { display: none; margin-top: 24px; }
    .chat-window { height: 400px; max-height: 60vh; overflow-y: auto; background: var(--input); padding: 16px; border-radius: 8px; border: 1px solid var(--border-color); margin-bottom: 16px; display: flex; flex-direction: column; gap: 12px; }
    .chat-message { padding: 10px 14px; border-radius: 12px; max-width: 80%; line-height: 1.6; font-size: 14px; }
    .user-message { background: var(--accent); color: white; align-self: flex-end; border-radius: 12px 12px 2px 12px; }
    .ai-message { background: var(--panel); color: #e6eef6; align-self: flex-start; border-radius: 12px 12px 12px 2px; }
    .ingest-status { margin-top: 16px; padding: 12px; border-radius: 8px; background: var(--input); display: none; color: #e6eef6; }
    .btn-chat { padding: 6px 14px; font-size: 13px; background: transparent; color: var(--muted); border: 1px solid var(--border-color); }
    .btn-chat:hover { background: var(--accent); color: #fff; border-color: var(--accent); }
    .result-card-actions { display: flex; gap: 8px; justify-content: flex-end; }
    .history-list { list-style: none; padding: 0; margin: 0; }
    .history-list li a { display: block; padding: 12px 16px; border-radius: 8px; margin-bottom: 8px; background: var(--input); color: #c5d2e0; text-decoration: none; transition: background 0.2s ease; border: 1px solid var(--border-color); }
    .history-list li a:hover { background: var(--panel); border-color: var(--accent); }
    .history-list .history-url { font-size: 12px; color: var(--muted); display: block; margin-top: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .search-filters { display: flex; gap: 8px; margin-bottom: 16px; }
    .filter-btn { background: var(--input); border: 1px solid var(--border-color); color: var(--muted); padding: 8px 12px; border-radius: 8px; cursor: pointer; transition: all 0.2s ease; display: flex; align-items: center; gap: 6px; font-size: 14px; }
    .filter-btn svg { width: 16px; height: 16px; }
    .filter-btn.active, .filter-btn:hover { background: var(--accent); color: white; border-color: var(--accent); }
  </style>
</head>
<body>
  <div class="page">
    <nav class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="brand"><img src="/static/images/logo.png" alt="OpenCurrent Logo" class="logo" /><span class="brand-name">OpenCurrent</span></div>
        <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar"><svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path></svg></button>
      </div>
      <div class="sidebar-content">
        <div class="nav-section">
          <h3 class="nav-section-title">Main</h3>
          <ul class="nav-menu">
            <li><a href="#" class="nav-item active" data-section="search"><span class="nav-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></span><span class="nav-text">Search</span></a></li>
            <li><a href="#" class="nav-item" data-section="chat"><span class="nav-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z" /></svg></span><span class="nav-text">Chat with Site</span></a></li>
          </ul>
        </div>
        <div class="nav-section">
          <h3 class="nav-section-title">History</h3>
          <ul class="nav-menu">
            <li><a href="#" class="nav-item" data-section="history"><span class="nav-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg></span><span class="nav-text">History</span></a></li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="main-content">
      <header class="topbar">
          <button class="sidebar-toggle-mobile" id="sidebarToggleMobile" aria-label="Toggle mobile menu">â˜°</button>
          <nav class="nav"><a href="#" class="active">Home</a><a href="#">Docs</a><a href="#">About</a></nav>
      </header>
      <main class="content">
        <section class="content-section active" id="search-section">
          <div class="section-header"><h2>Knowledge Search</h2><p>Search and discover information from across the web with precision and ease.</p></div>
          <div class="search-content-wrapper">
            <div class="search-form-wrapper">
              <form id="searchForm" class="card">
                <div class="search-filters" id="searchFilters">
                    <button type="button" class="filter-btn active" data-type="search"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /><path stroke-linecap="round" stroke-linejoin="round" d="M18.75 12.75h-15" /></svg>Web</button>
                    <button type="button" class="filter-btn" data-type="news"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 18V7.125c0-.621.504-1.125 1.125-1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V6H12z" /></svg>News</button>
                    <button type="button" class="filter-btn" data-type="places"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" /><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" /></svg>Places</button>
                </div>
                <div class="form-group"><label for="query">Search Query</label><input id="query" class="input" placeholder="e.g. Italian restaurants in Nairobi" required /></div>
                <div class="actions"><button type="submit" id="runBtn" class="btn btn-primary">Search</button></div>
              </form>
            </div>
            <div class="search-results-wrapper" id="searchResultsWrapper"><div class="results-panel"><div class="results-header"><h3>Search Results</h3></div><div id="searchResultsList" class="results-list"></div></div></div>
          </div>
        </section>
        <section class="content-section" id="chat-section">
          <div class="section-header"><h2>Chat with a Website</h2><p>Enter a URL to ingest its content, then ask questions to get AI-powered answers.</p></div>
          <div class="ingest-container" id="ingestContainer" style="max-width: 700px;">
            <form id="ingestForm" class="card">
              <div class="form-group"><label for="ingestUrl">URL to Ingest and Chat With</label><input id="ingestUrl" class="input" placeholder="https://example.com/about-us" required /></div>
              <div class="actions"><button type="submit" class="btn btn-primary">Ingest Site</button></div>
            </form>
            <div id="ingestStatus" class="ingest-status"></div>
          </div>
          <div class="chat-container" id="chatContainer">
            <div id="chatWindow" class="chat-window"><div class="ai-message">Hello! Once the site is ingested, ask me anything about its content.</div></div>
            <form id="chatForm" class="card"><div class="form-group" style="margin-bottom: 0;"><input id="chatInput" class="input" placeholder="Ask a question about the website..." required autocomplete="off" /></div></form>
          </div>
        </section>
        <section class="content-section" id="history-section">
            <div class="section-header"><h2>History</h2><p>Review your recent search queries and chat sessions.</p></div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
              <div><h3>Search History</h3><ul id="searchHistoryList" class="history-list"></ul></div>
              <div><h3>Chat History</h3><ul id="chatHistoryList" class="history-list"></ul></div>
            </div>
        </section>
      </main>
      <footer class="footer"><div class="footer-content"><div class="copyright">&copy; 2025 OpenCurrent. All rights reserved.</div><a href="#" id="helpLink" class="help-link">Help</a></div></footer>
    </div>
  </div>
  <div class="help-modal" id="helpModal"><div class="help-content"><h2>OpenCurrent Help</h2><div class="help-section" style="margin-bottom: 16px;"><h3>Search</h3><p>Use the search form to find information. Select a filter (Web, News, Places) and enter your query.</p></div><div class="help-section" style="margin-bottom: 16px;"><h3>Chat with Site</h3><p>Use the chat form to have a conversation with a specific website. Enter a URL, click "Ingest Site," and then ask questions.</p></div><div class="actions"><button id="helpCloseBtn" class="btn btn-primary">Got it</button></div></div></div>
  <div class="help-modal" id="summaryModal"><div class="help-content" style="max-width: 700px;"><div id="summaryModalContent"></div><div class="actions"><button id="summaryCloseBtn" class="btn btn-primary">Close</button></div></div></div>
  <script src="/static/js/app.js"></script>
</body>
</html>